---
AWSTemplateFormatVersion: '2010-09-09'
Description: >
  Add Description Here.

# ------------------------------------------


# ==========================================
Metadata: {}
# Metadata:


# ==========================================
# Parameters {}
Parameters:

  # ------------------------------------------
  # --- Name give to this project
  ProjectName:
    Description: "The Name given to this Project."
    ConstraintDescription: "Name must satisfy S3 constraints."
    Type: String
    Default: "cfn-www-cicd-cli"
    MinLength: 3
    MaxLength: 63
    AllowedPattern:
      (?!^(\d{1,3}\.){3}\d{1,3}$)(^[a-z0-9]([a-z0-9-]*(\.[a-z0-9])?)*$(?<!\-))

  # ------------------------------------------
  # --- The Base URL Domain Name
  DomainBaseURL:
    Description: "Domain Base URL Hosted Zone Apex"
    Type: String
    Default: "cloudemprise.org"
    AllowedPattern:
      ^(([a-zA-Z]{1})|([a-zA-Z]{1}[a-zA-Z]{1})|([a-zA-Z]{1}[0-9]{1})|([0-9]{1}[a-zA-Z]{1})|([a-zA-Z0-9][a-zA-Z0-9-_]{1,61}[a-zA-Z0-9]))\.([a-zA-Z]{2,6}|[a-zA-Z0-9-]{2,30}\.[a-zA-Z]{2,3})$

  # ------------------------------------------
  # --- The Domain Hosted Zone ID
  DomainHostedZoneId:
    Description: "An Amazon Route 53 hosted zone ID"
    Type: AWS::Route53::HostedZone::Id


# ==========================================
Conditions: {}
# Conditions:


# ==========================================
Resources:

  # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  #         CERTIFICATE DEFINITION
  # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


  # ------------------------------------------
  # --- Certificate Definition
  DomainBaseURLCertificate:
    Type: "AWS::CertificateManager::Certificate"
    # .............................
    Properties:
      # .............................
      Tags:
        -
          Key: "Name"
          Value: !Sub "${ProjectName}"
      # .............................
      DomainName: !Sub "${DomainBaseURL}"
      # .............................
      ValidationMethod: "DNS"
      # .............................
      SubjectAlternativeNames:
        -
          !Sub "*.${DomainBaseURL}"
      # .............................
      DomainValidationOptions:
        - DomainName: !Sub "${DomainBaseURL}"
          HostedZoneId: !Ref DomainHostedZoneId
      # .............................
      CertificateTransparencyLoggingPreference: "ENABLED"


# ==========================================
# Outputs: {}
Outputs:

  # ------------------------------------------
  # --- ARN DomainBaseURL Certificate
  DomainBaseURLCertificateARN:
    Description: "The ARN of the DomainBaseURL Certificate."
    Value: !Ref DomainBaseURLCertificate
